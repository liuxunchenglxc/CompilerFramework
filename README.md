# CompilerFramework

- **开发人员**: `刘迅承`
- **依赖环境**: `.NET Core 2.1`
- **开发环境**: `Visual Studio 2017`
- **开发语言**: `C# 7.1`
- **命名空间**: `CompilerFramework`
- **详细参考**: `./CompilerFramework/CompilerFramework.xml`

## 词法部分：

### 基础框架类：`LexerFramework`

- **基本功能**：实现正则表达式与词法分析的桥梁。
- **基本应用**：对普通的语言进行基本的词法分析。
- **高级功能**：实现多组正则表达式分组匹配模式。
- **高级应用**：对多行注释实现词法分析，构建多重匹配分支与入口。
- **应用步骤**：先添加`LexItem`再对`TextReader`进行词法分析。
- **词法分析方式**：逐行读入逐行分析，单次匹配触发事件，持续分析。
- **词法分析结果**：从事件`OnLexedEventHandler`接收结果，并可以根据结果更改匹配组，以实现改变匹配分支。
- **词法分析异常**：异常类为`LexerFrameException`
  1. 匹配组号超出预定组号，报告组号
  2. 匹配失败，报告失败位置
  3. 零长度匹配，会引起死循环，报告具体的`LexItem`内容
- **词法分析最小单位**：结构体`LexItem`
  1. 名称：便于语法分析与分类
  2. 正则表达式：匹配法则，自动在表达式最前方添加`^`
  3. 正则表达式匹配模式：默认不使用特殊模式
  4. 匹配结果文本处理委托：用于对文本结果的处理
- **词法分析结果最小单位**：结构体`Lexeresult`
  1. 次序：便于计次与异步处理
  2. 名称：与结构体`LexItem`的名称一致
  3. 值：经过用户处理后或默认`string`内容不变，类型为`object`的结果
- **词法分析计数方式**：根据事件返回值判断是否计数，如果匹配结果经过处理后为空，则不触发事件，不计数。
- **输入流**：输入选择`TextReader`类，其派生类`StringReader`可接收字符串流，`StreamReader`可接收文件流。适配最常用的两种输入类型。

### 派生框架类：`HLlangLexerFramework`

- **基本功能**：封装高级编程语言的词法分析项
- **基本应用**：更容易，代码更少的创建词法分析器
- **高级功能**：分组匹配时，匹配组的批量添加
- **高级应用**：更容易，代码更少的实现多组匹配词法分析器
- **词法分析封装**：
  1. **添加保留字**：批量添加，自动在正则表达式末尾添加零宽断言`(?=\W|$)`
  2. **添加标识符**：默认规则为`[A-Za-z]\w*`
  3. **添加运算符**：批量添加，无特殊处理
  4. **添加界符**：批量添加，无特殊处理
  5. **添加常项**：批量添加，可选自动在正则表达式末尾添加零宽断言`(?=\W|$)`
  6. **常用转换委托**